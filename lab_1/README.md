# Лабораторная работа: "HTTP аутентификация"

## Цель работы:
Спроектировать и разработать систему авторизации пользователей на протоколе HTTP.

## Ход работы
### Пользовательский интерфейс

###### Диаграма работы программы
Диагамма представлена в файле **diagram.jpg**

<image src="diagram.png" style="background: white">

---

При входе на сайт пользователь попадает на страницу ***login.php***, где расположена форма авторизации, пользователь вводит логин и пароль и при нажатии кнопки "Войти" выполняется скрипт ***auth.php*** который подключается и выполняет запрос в базу данных, откуда берет строку с логином введенным в форме, если такой строки не найдена происходит редирект на страницу ***/no_user.html***, где пишется соответствующая ошибка и кнопка повторить вход.

При нахождении такой строки с логином с помощью функции `password_verify($_POST['pass'], $row['pass'])` производится проверка пароля на соответствие с хешем хранящимся в базе данных. Если проверка пройдена то пользователь получает куки и попадает на страницу ***user.html***, если пароль неверный то выводится соответствующая ошибка.

Если у пользователя еще нет аккаунта, то внизу формы есть кнопка зарегестрироваться, по клику на которую пользователь попаает на страницу ***registration.php***.

По нажатии на кнопку "Зарегистрироваться" выполняется скрипт ***check.php***. Аналогично с формой авторизации происходит происходит подключение к базе данных, а так же проверка на корректность ввода логина и пароля в форме, если введенные данные не проходят проверку, то выводится соответствующая ошибка. Проверка на занятость логина осуществляется с помощью подключения к базе данных и поиска строки с таким логином, если хоть 1 такая строка найдена, то выводится соответствующая ошибка. С помощью функции `password_hash($pass, PASSWORD_DEFAULT)` пароль хешируется по алгоритму `PASSWORD_DEFAULT`, затем логин и захешированный пароль с рандомно сгенерированной солью заносится в базу данных. Пользователь получает куки, содержащие логин пользователя и попадает на страницу ***user.html***

### База данных
#### lab_1
| id | login | pass |

В этой таблице:

- **id** - уникальный идентификатор пользователя (int);

- **login** - имя пользователя (varchar(100));

- **pass** - хэш пароля (varchar(60));

### Вывод
Спроектировал и разработал простейшую систему авторизации пользователей на протоколе HTTP.
